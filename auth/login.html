<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In | Tranquil Thoughts</title>
    <script src="https://kit.fontawesome.com/e1dd270f5d.js" crossorigin="anonymous"></script>
    <!-- Firebase App (required) and Firebase Auth (required for authentication) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>
    <form action="" class="signUp active" method="post" id="signUpForm">
        <h2>Sign Up</h2>
        <div class="social-login">
            <a class="social-btn google-btn" id="GoogleSignUp">
                <i class="fa-brands fa-google"></i>Sign up with Google
            </a>
            <a class="social-btn apple-btn" id="AppleSignUp">
                <i class="fa-brands fa-apple"></i>Sign up with Apple
            </a>
        </div>
        <div class="form-separator">or</div>
        <div class="name">
            <input type="text" id="firstName" placeholder="First Name" required aria-label="First Name">
            <input type="text" id="lastName" placeholder="Last Name" required aria-label="Last Name">
        </div>
        <input type="email" id="emailSignUp" placeholder="Email" required aria-label="Email">
        <input type="password" id="passwordSignUp" placeholder="Password" required aria-label="Password">
        <div class="switch">
            <a class="btn in" onclick="showSignIn();">Sign In</a>
            <button type="submit" class="btn up">Sign Up</button>
        </div>
    </form>

    <form action="" class="signIn" method="post" id="signInForm">
        <h2>Sign In</h2>
        <div class="social-login">
            <a class="social-btn google-btn" id="GoogleSignIn">
                <i class="fa-brands fa-google"></i>Sign in with Google
            </a>
            <a class="social-btn apple-btn" id="AppleSignIn">
                <i class="fa-brands fa-apple"></i>Sign in with Apple
            </a>
        </div>
        <div class="form-separator">or</div>
        <input type="email" id="emailSignIn" placeholder="Email" required aria-label="Email">
        <input type="password" id="passwordSignIn" placeholder="Password" required aria-label="Password">
        <div class="switch">
            <a class="btn in" onclick="showSignUp();">Sign Up</a>
            <button type="submit" class="btn up">Sign In</button>
        </div>
    </form>

    <script src="../js/main.js"></script>
    <script>

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBd_Bf-a5g8sNBD0zUXF6XTOKt3n6XD4vw",
            authDomain: "tranquil-thoughts.firebaseapp.com",
            projectId: "tranquil-thoughts",
            storageBucket: "tranquil-thoughts.appspot.com",
            messagingSenderId: "46951344026",
            appId: "1:46951344026:web:d6c924c18c9b52f5ce7c23"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        // Set up Google and Apple Auth providers
        const googleProvider = new firebase.auth.GoogleAuthProvider();
        const appleProvider = new firebase.auth.OAuthProvider('apple.com');
        
        // Google Sign-In event listener
        document.getElementById('GoogleSignIn').addEventListener('click', () => {
            firebase.auth().signInWithPopup(googleProvider)
            .then((result) => {
                window.location.href = '../src/dashboard.html';
            })
            .catch((error) => {
                console.error('Error during Google Sign-in:', error);
            });
        });
        
        // Google Sign-Up event listener
        document.getElementById('GoogleSignUp').addEventListener('click', () => {
            firebase.auth().signInWithPopup(googleProvider)
            .then((result) => {
                window.location.href = '../src/dashboard.html';
            })
            .catch((error) => {
                console.error('Error during Google Sign-up:', error);
            });
        });
        
        // Apple Sign-In event listener
        document.getElementById('AppleSignIn').addEventListener('click', () => {
            firebase.auth().signInWithPopup(appleProvider)
            .then((result) => {
                window.location.href = '../src/dashboard.html';
            })
            .catch((error) => {
                console.error('Error during Apple Sign-in:', error);
            });
        });
        
        // Apple Sign-Up event listener
        document.getElementById('AppleSignUp').addEventListener('click', () => {
            firebase.auth().signInWithPopup(appleProvider)
            .then((result) => {
                window.location.href = '../src/dashboard.html';
            })
            .catch((error) => {
                console.error('Error during Apple Sign-up:', error);
            });
        });
        
        // Email Sign-Up form submission handler
        document.getElementById('signUpForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('emailSignUp').value;
            const password = document.getElementById('passwordSignUp').value;
        
            firebase.auth().createUserWithEmailAndPassword(email, password)
            .then((userCredential) => {
                window.location.href = '../src/dashboard.html';
            })
            .catch((error) => {
                console.error('Error during email sign-up:', error);
            });
        });
        
        // Email Sign-In form submission handler
        document.getElementById('signInForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('emailSignIn').value;
            const password = document.getElementById('passwordSignIn').value;
        
            firebase.auth().signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
                window.location.href = '../src/dashboard.html';
            })
            .catch((error) => {
                console.error('Error during email sign-in:', error);
            });
        });</script>
</body>
</html>
